<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ticket Prioritizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div id="loading-spinner-container" style="display: none;">
        <div id="loading-spinner" class="spinner"></div>
        <p id="loading-message">Analyzing your ticket...</p>
    </div>
    
    <div class="topbar">
        <a href="/" class="nav-item active">Submit Ticket</a>
        <a href="/history" class="nav-item">View History</a>
    </div>           
    
    <h1>Submit a Support Ticket</h1>
    {% if error %}
        <div class="error">{{ error }}</div>
    {% endif %}
    
    <form id="ticketForm" action="/submit_ticket" method="POST">
        <label for="ticket">Ticket Description:</label><br>
        <textarea id="ticket" name="ticket" rows="4" cols="50" required></textarea><br><br>
        <button type="submit">Submit Ticket</button>
    </form>

    <!-- Modal -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <p>Ticket priority: <strong id="priorityText">{{ priority }}</strong> and Category: <strong id="categoryText">{{ category }}</strong></p>
        </div>
    </div>

    {% if priority %}
    <script>
        const priority = "{{ priority }}";
        const category = "{{ category }}";
    </script>
    {% endif %}
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
